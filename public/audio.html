<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Ses Oynatıcı Örneği</title>
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<!-- Plyr core CSS -->
	<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
	<link rel="stylesheet" href="plyr/custom.css" />
	<style>
		body {font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; margin: 2rem; background:#f8f9fa; color:#212529;}
		h1 {font-size: 1.6rem; margin-bottom: 1rem;}
		.plyr--audio {border: 1px solid #ddd; border-radius: 12px;}
	</style>
</head>
<body>
	<h1>Örnek Ses Oynatıcı (Plyr)</h1>
	<p>Bu sayfa Plyr kütüphanesi ile bir ses dosyasının nasıl oynatılacağını gösterir. Oynatıcı bir modal içinde açılacaktır.</p>

	<!-- External Play Button -->
	<button id="open-audio-modal" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#audioModal">Sesi Oynat</button>

	<p style="margin-top:2rem;"> <a href="index.html">Video örneğine dön</a></p>

	<!-- Modal -->
	<div class="modal fade" id="audioModal" tabindex="-1" aria-labelledby="audioModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="audioModalLabel">Ses Oynatıcı</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
				</div>
				<div class="modal-body">
					<audio id="audio-player" crossorigin>
						<source src="plyr/istiklalMarsi2.mp3" type="audio/mpeg" />
						Tarayıcınız audio etiketini desteklemiyor.
					</audio>
				</div>
				<div class="modal-footer justify-content-between">
					<small class="text-secondary">Konu adı yazılabilir</small>
					<button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Kapat</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Plyr core JS -->
	<script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
	<!-- Bootstrap bundle (includes Popper) -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script>
		let audioPlayer; // Plyr örneği
		document.addEventListener('DOMContentLoaded', () => {
			const modalEl = document.getElementById('audioModal');
			const bsModal = new bootstrap.Modal(modalEl); // not strictly required, but keeps a handle if needed

			// Modal açıldığında bir kere initialize et ve otomatik oynat
			modalEl.addEventListener('shown.bs.modal', () => {
				if(!audioPlayer){
					audioPlayer = new Plyr('#audio-player', {
						controls: ['play','progress','current-time','duration','mute','volume','download'],
						invertTime: false,
						i18n: {
							play: 'Oynat', pause: 'Duraklat', mute: 'Sessiz', unmute: 'Sesi aç', volume: 'Ses', currentTime: 'Şimdiki zaman', duration: 'Süre', download: 'İndir'
						},
						urls: { download: 'plyr/istiklalMarsi2.mp3' }
					});
						audioPlayer.on('ready', () => console.log('Ses hazır. Süre (sn):', audioPlayer.duration));
				}
				// Açıldığında otomatik başlat
				try { audioPlayer.play(); } catch(e){ console.warn('Autoplay blocked', e); }
			});

			// Modal kapanırken sesi duraklat
			modalEl.addEventListener('hide.bs.modal', () => {
				if(audioPlayer){ audioPlayer.pause(); }
			});
		});
	</script>
</body>
</html>
